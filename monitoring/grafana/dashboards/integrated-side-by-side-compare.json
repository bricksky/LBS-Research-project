{
  "uid": "integrated-side-by-side-compare",
  "title": "ÌÜµÌï© ÎπÑÍµê Î∂ÑÏÑù ÎåÄÏãúÎ≥¥Îìú (3-Way Fixed: 1=RDBMS, 2=Kafka, 3=Redis Stream)",
  "timezone": "browser",
  "schemaVersion": 37,
  "version": 3,
  "refresh": "5s",
  "tags": ["compare", "side-by-side", "kafka", "redis", "stream", "rdbms", "performance"],
  "time": { "from": "now-6h", "to": "now" },
  "graphTooltip": 1,
  "editable": true,
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": { "type": "grafana", "uid": "-- Grafana --" },
        "enable": true,
        "hide": true,
        "name": "Ï£ºÏÑù Î∞è ÏïåÎ¶º",
        "type": "dashboard"
      }
    ]
  },
  "templating": {
    "list": [
      {
        "type": "datasource",
        "name": "datasource",
        "label": "Îç∞Ïù¥ÌÑ∞ ÏÜåÏä§",
        "query": "prometheus",
        "refresh": 1,
        "hide": 0
      },

      {
        "type": "constant",
        "name": "application_left",
        "label": "1) RDBMS Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò",
        "query": "itrc-api-rdbms",
        "current": { "text": "itrc-api-rdbms", "value": "itrc-api-rdbms" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "application_middle",
        "label": "2) Kafka Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò",
        "query": "itrc-api-kafka",
        "current": { "text": "itrc-api-kafka", "value": "itrc-api-kafka" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "application_right",
        "label": "3) Redis Stream Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò",
        "query": "itrc-api-redis-stream",
        "current": { "text": "itrc-api-redis-stream", "value": "itrc-api-redis-stream" },
        "hide": 2
      },

      {
        "type": "constant",
        "name": "total_uri_regex_left",
        "label": "1) RDBMS Ï†ÑÏ≤¥ URI Ï†ïÍ∑úÏãù",
        "query": ".*/api/v1/rdbms/.*",
        "current": { "text": ".*/api/v1/rdbms/.*", "value": ".*/api/v1/rdbms/.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "write_uri_regex_left",
        "label": "1) RDBMS Ïì∞Í∏∞ URI Ï†ïÍ∑úÏãù",
        "query": ".*/api/v1/rdbms/update.*",
        "current": { "text": ".*/api/v1/rdbms/update.*", "value": ".*/api/v1/rdbms/update.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "read_uri_regex_left",
        "label": "1) RDBMS ÏùΩÍ∏∞ URI Ï†ïÍ∑úÏãù",
        "query": ".*/api/v1/rdbms/search/.*",
        "current": { "text": ".*/api/v1/rdbms/search/.*", "value": ".*/api/v1/rdbms/search/.*" },
        "hide": 2
      },

      {
        "type": "constant",
        "name": "total_uri_regex_middle",
        "label": "2) Kafka Ï†ÑÏ≤¥ URI Ï†ïÍ∑úÏãù",
        "query": ".*(kafka|redis).*",
        "current": { "text": ".*(kafka|redis).*", "value": ".*(kafka|redis).*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "write_uri_regex_middle",
        "label": "2) Kafka Ïì∞Í∏∞ URI Ï†ïÍ∑úÏãù",
        "query": ".*kafka.*",
        "current": { "text": ".*kafka.*", "value": ".*kafka.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "read_uri_regex_middle",
        "label": "2) Kafka ÏùΩÍ∏∞ URI Ï†ïÍ∑úÏãù",
        "query": ".*redis.*",
        "current": { "text": ".*redis.*", "value": ".*redis.*" },
        "hide": 2
      },

      {
        "type": "constant",
        "name": "total_uri_regex_right",
        "label": "3) Redis Stream Ï†ÑÏ≤¥ URI Ï†ïÍ∑úÏãù",
        "query": ".*/api/v1/redis/.*",
        "current": { "text": ".*/api/v1/redis/.*", "value": ".*/api/v1/redis/.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "write_uri_regex_right",
        "label": "3) Redis Stream Ïì∞Í∏∞ URI Ï†ïÍ∑úÏãù",
        "query": ".*/api/v1/redis/update.*",
        "current": { "text": ".*/api/v1/redis/update.*", "value": ".*/api/v1/redis/update.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "read_uri_regex_right",
        "label": "3) Redis Stream ÏùΩÍ∏∞ URI Ï†ïÍ∑úÏãù",
        "query": ".*/api/v1/redis/search/.*",
        "current": { "text": ".*/api/v1/redis/search/.*", "value": ".*/api/v1/redis/search/.*" },
        "hide": 2
      }
    ]
  },

  "panels": [
    {
      "id": 1,
      "type": "row",
      "title": "üìå Í∞úÏöî ‚Äî LEFT vs MIDDLE vs RIGHT (Ï≤òÎ¶¨Îüâ/Ïò§Î•òÏú®)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }
    },

    {
      "id": 2,
      "type": "stat",
      "title": "LEFT Ï†ÑÏ≤¥ Ï≤òÎ¶¨Îüâ (RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 0, "y": 1 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "area",
        "textMode": "auto"
      }
    },
    {
      "id": 3,
      "type": "stat",
      "title": "MIDDLE Ï†ÑÏ≤¥ Ï≤òÎ¶¨Îüâ (RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 8, "y": 1 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval])) ) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "area",
        "textMode": "auto"
      }
    },
    {
      "id": 4,
      "type": "stat",
      "title": "RIGHT Ï†ÑÏ≤¥ Ï≤òÎ¶¨Îüâ (RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 16, "y": 1 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval])) ) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "area",
        "textMode": "auto"
      }
    },

    {
      "id": 5,
      "type": "stat",
      "title": "LEFT Ïò§Î•òÏú® (ÏÑúÎ≤Ñ Ïò§Î•ò, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 0, "y": 5 },
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    max(\n      ( (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", status=~\"5..\"}[$__rate_interval])) ) or vector(0) )\n      or\n      ( (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) ) or vector(0) )\n    )\n    /\n    clamp_min( (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "none",
        "textMode": "auto"
      }
    },
    {
      "id": 6,
      "type": "stat",
      "title": "MIDDLE Ïò§Î•òÏú® (ÏÑúÎ≤Ñ Ïò§Î•ò, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 8, "y": 5 },
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    max(\n      ( (sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", status=~\"5..\"}[$__rate_interval])) ) or vector(0) )\n      or\n      ( (sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) ) or vector(0) )\n    )\n    /\n    clamp_min( (sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "none",
        "textMode": "auto"
      }
    },
    {
      "id": 7,
      "type": "stat",
      "title": "RIGHT Ïò§Î•òÏú® (ÏÑúÎ≤Ñ Ïò§Î•ò, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 16, "y": 5 },
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    max(\n      ( (sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", status=~\"5..\"}[$__rate_interval])) ) or vector(0) )\n      or\n      ( (sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) ) or vector(0) )\n    )\n    /\n    clamp_min( (sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "none",
        "textMode": "auto"
      }
    },

    {
      "id": 8,
      "type": "row",
      "title": "‚úçÔ∏è Ïì∞Í∏∞ ÏÑ±Îä• ‚Äî LEFT vs MIDDLE vs RIGHT (RPS / P95¬∑P99)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 9 }
    },

    {
      "id": 9,
      "type": "timeseries",
      "title": "LEFT Ïì∞Í∏∞ Ï≤òÎ¶¨Îüâ (Write RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 10 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "LEFT Write RPS",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 10,
      "type": "timeseries",
      "title": "MIDDLE Ïì∞Í∏∞ Ï≤òÎ¶¨Îüâ (Write RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 10 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "MIDDLE Write RPS",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 11,
      "type": "timeseries",
      "title": "RIGHT Ïì∞Í∏∞ Ï≤òÎ¶¨Îüâ (Write RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 10 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "RIGHT Write RPS",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 12,
      "type": "timeseries",
      "title": "LEFT Ïì∞Í∏∞ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 18 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 13,
      "type": "timeseries",
      "title": "MIDDLE Ïì∞Í∏∞ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 18 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 14,
      "type": "timeseries",
      "title": "RIGHT Ïì∞Í∏∞ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 18 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 15,
      "type": "row",
      "title": "üîç ÏùΩÍ∏∞ ÏÑ±Îä• ‚Äî LEFT vs MIDDLE vs RIGHT (RPS / P95¬∑P99)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 }
    },

    {
      "id": 16,
      "type": "timeseries",
      "title": "LEFT ÏùΩÍ∏∞ Ï≤òÎ¶¨Îüâ (Read RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 27 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "LEFT Read RPS",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps", "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 17,
      "type": "timeseries",
      "title": "MIDDLE ÏùΩÍ∏∞ Ï≤òÎ¶¨Îüâ (Read RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 27 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "MIDDLE Read RPS",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps", "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 18,
      "type": "timeseries",
      "title": "RIGHT ÏùΩÍ∏∞ Ï≤òÎ¶¨Îüâ (Read RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 27 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "RIGHT Read RPS",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps", "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 19,
      "type": "timeseries",
      "title": "LEFT ÏùΩÍ∏∞ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 35 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 20,
      "type": "timeseries",
      "title": "MIDDLE ÏùΩÍ∏∞ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 35 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 21,
      "type": "timeseries",
      "title": "RIGHT ÏùΩÍ∏∞ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 35 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 22,
      "type": "row",
      "title": "üßä Ïã†ÏÑ†ÎèÑ(ÏÑ†ÌÉù) ‚Äî LEFT vs MIDDLE vs RIGHT (Freshness P95¬∑P99)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 43 }
    },

    {
      "id": 23,
      "type": "timeseries",
      "title": "LEFT Ïã†ÏÑ†ÎèÑ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 44 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 24,
      "type": "timeseries",
      "title": "MIDDLE Ïã†ÏÑ†ÎèÑ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 44 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 25,
      "type": "timeseries",
      "title": "RIGHT Ïã†ÏÑ†ÎèÑ ÏßÄÏó∞ (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 44 },
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 26,
      "type": "row",
      "title": "üìà ÏÉÅÎåÄ ÎπÑÍµê(Î∂ÑÏÑùÏö©) ‚Äî LEFT ÎåÄÎπÑ MIDDLE/RIGHT Î≥ÄÌôî",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 52 }
    },

    {
      "id": 27,
      "type": "timeseries",
      "title": "Ïì∞Í∏∞ P95 Î≥ÄÌôîÏú® (MIDDLE/LEFT, RIGHT/LEFT, %)",
      "description": "0%Î©¥ ÎèôÏùº, +50%Î©¥ LEFT ÎåÄÎπÑ 1.5Î∞∞(50% Îçî ÌÅº).",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 53 },
      "targets": [
        {
          "refId": "A",
          "expr": "100 * ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval]))) / clamp_min(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval]))), 0.000001)) - 1)",
          "legendFormat": "MIDDLE vs LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "100 * ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval]))) / clamp_min(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval]))), 0.000001)) - 1)",
          "legendFormat": "RIGHT vs LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 28,
      "type": "timeseries",
      "title": "ÏùΩÍ∏∞ P95 Î≥ÄÌôîÏú® (MIDDLE/LEFT, RIGHT/LEFT, %)",
      "description": "0%Î©¥ ÎèôÏùº, +50%Î©¥ LEFT ÎåÄÎπÑ 1.5Î∞∞(50% Îçî ÌÅº).",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 53 },
      "targets": [
        {
          "refId": "A",
          "expr": "100 * ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval]))) / clamp_min(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval]))), 0.000001)) - 1)",
          "legendFormat": "MIDDLE vs LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "100 * ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval]))) / clamp_min(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval]))), 0.000001)) - 1)",
          "legendFormat": "RIGHT vs LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 29,
      "type": "timeseries",
      "title": "Ïò§Î•òÏú® Ï∞®Ïù¥ (MIDDLE-LEFT, RIGHT-LEFT, %p)",
      "description": "ÌçºÏÑºÌä∏Ìè¨Ïù∏Ìä∏ Ï∞®Ïù¥(Ïòà: 2.0% - 0.5% = +1.5%p).",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 61 },
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  (\n    100 * (max((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", status=~\"5..\"}[$__rate_interval])) ) or vector(0) ) or ((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) ) or vector(0)))\n    /\n    clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n  -\n  (\n    100 * (max((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", status=~\"5..\"}[$__rate_interval])) ) or vector(0) ) or ((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) ) or vector(0)))\n    /\n    clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n)",
          "legendFormat": "MIDDLE - LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "(\n  (\n    100 * (max((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", status=~\"5..\"}[$__rate_interval])) ) or vector(0) ) or ((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) ) or vector(0)))\n    /\n    clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n  -\n  (\n    100 * (max((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", status=~\"5..\"}[$__rate_interval])) ) or vector(0) ) or ((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) ) or vector(0)))\n    /\n    clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n)",
          "legendFormat": "RIGHT - LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 30,
      "type": "timeseries",
      "title": "Ï†ÑÏ≤¥ Ï≤òÎ¶¨Îüâ Î≥ÄÌôîÏú® (MIDDLE/LEFT - 1, RIGHT/LEFT - 1, %)",
      "description": "Î∂ÄÌïò(Ï¥àÎãπ ÏöîÏ≤≠ Ïàò)Í∞Ä LEFT ÎåÄÎπÑ ÏñºÎßàÎÇò ÌÅ∞ÏßÄ/ÏûëÏùÄÏßÄ ÌôïÏù∏.",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 61 },
      "targets": [
        {
          "refId": "A",
          "expr": "100 * ((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval])) / clamp_min(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])), 0.000001)) - 1)",
          "legendFormat": "MIDDLE vs LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        },
        {
          "refId": "B",
          "expr": "100 * ((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval])) / clamp_min(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])), 0.000001)) - 1)",
          "legendFormat": "RIGHT vs LEFT",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    }
  ]
}