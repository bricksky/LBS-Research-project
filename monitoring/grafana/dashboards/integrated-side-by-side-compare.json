{
  "uid": "integrated-side-by-side-compare",
  "title": "í†µí•© ë¹„êµ ë¶„ì„ ëŒ€ì‹œë³´ë“œ (ê³ ì •: RDBMS vs Kafka vs Redis Stream)",
  "timezone": "browser",
  "schemaVersion": 37,
  "version": 4,
  "refresh": "5s",
  "tags": ["compare", "side-by-side", "kafka", "redis", "stream", "rdbms", "performance"],
  "time": { "from": "now-6h", "to": "now" },
  "graphTooltip": 1,
  "editable": true,
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": { "type": "grafana", "uid": "-- Grafana --" },
        "enable": true,
        "hide": true,
        "name": "ì£¼ì„ ë° ì•Œë¦¼",
        "type": "dashboard"
      }
    ]
  },
  "templating": {
    "list": [
      {
        "type": "datasource",
        "name": "datasource",
        "label": "ë°ì´í„° ì†ŒìŠ¤",
        "query": "prometheus",
        "refresh": 1,
        "hide": 0
      },
      {
        "type": "constant",
        "name": "application_left",
        "label": "RDBMS ì• í”Œë¦¬ì¼€ì´ì…˜",
        "query": "itrc-api-rdbms",
        "current": { "text": "itrc-api-rdbms", "value": "itrc-api-rdbms" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "application_middle",
        "label": "Kafka ì• í”Œë¦¬ì¼€ì´ì…˜",
        "query": "itrc-api-kafka",
        "current": { "text": "itrc-api-kafka", "value": "itrc-api-kafka" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "application_right",
        "label": "Redis Stream ì• í”Œë¦¬ì¼€ì´ì…˜",
        "query": "itrc-api-redis-stream",
        "current": { "text": "itrc-api-redis-stream", "value": "itrc-api-redis-stream" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "total_uri_regex_left",
        "label": "RDBMS ì „ì²´ URI ì •ê·œì‹",
        "query": ".*/api/v1/rdbms/.*",
        "current": { "text": ".*/api/v1/rdbms/.*", "value": ".*/api/v1/rdbms/.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "write_uri_regex_left",
        "label": "RDBMS ì“°ê¸° URI ì •ê·œì‹",
        "query": ".*/api/v1/rdbms/update.*",
        "current": { "text": ".*/api/v1/rdbms/update.*", "value": ".*/api/v1/rdbms/update.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "read_uri_regex_left",
        "label": "RDBMS ì½ê¸° URI ì •ê·œì‹",
        "query": ".*/api/v1/rdbms/search/.*",
        "current": { "text": ".*/api/v1/rdbms/search/.*", "value": ".*/api/v1/rdbms/search/.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "total_uri_regex_middle",
        "label": "Kafka ì „ì²´ URI ì •ê·œì‹",
        "query": ".*(kafka|redis).*",
        "current": { "text": ".*(kafka|redis).*", "value": ".*(kafka|redis).*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "write_uri_regex_middle",
        "label": "Kafka ì“°ê¸° URI ì •ê·œì‹",
        "query": ".*kafka.*",
        "current": { "text": ".*kafka.*", "value": ".*kafka.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "read_uri_regex_middle",
        "label": "Kafka ì½ê¸° URI ì •ê·œì‹",
        "query": ".*redis.*",
        "current": { "text": ".*redis.*", "value": ".*redis.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "total_uri_regex_right",
        "label": "Redis Stream ì „ì²´ URI ì •ê·œì‹",
        "query": ".*/api/v1/redis/.*",
        "current": { "text": ".*/api/v1/redis/.*", "value": ".*/api/v1/redis/.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "write_uri_regex_right",
        "label": "Redis Stream ì“°ê¸° URI ì •ê·œì‹",
        "query": ".*/api/v1/redis/update.*",
        "current": { "text": ".*/api/v1/redis/update.*", "value": ".*/api/v1/redis/update.*" },
        "hide": 2
      },
      {
        "type": "constant",
        "name": "read_uri_regex_right",
        "label": "Redis Stream ì½ê¸° URI ì •ê·œì‹",
        "query": ".*/api/v1/redis/search/.*",
        "current": { "text": ".*/api/v1/redis/search/.*", "value": ".*/api/v1/redis/search/.*" },
        "hide": 2
      }
    ]
  },
  "panels": [
    {
      "id": 1,
      "type": "row",
      "title": "ðŸ“Œ ê°œìš” â€” RDBMS vs Kafka vs Redis Stream (ì²˜ë¦¬ëŸ‰/ì˜¤ë¥˜ìœ¨)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }
    },
    {
      "id": 2,
      "type": "stat",
      "title": "RDBMS ì „ì²´ ì²˜ë¦¬ëŸ‰ (RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 0, "y": 1 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "area",
        "textMode": "auto"
      }
    },
    {
      "id": 3,
      "type": "stat",
      "title": "Kafka ì „ì²´ ì²˜ë¦¬ëŸ‰ (RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 8, "y": 1 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval])) ) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "area",
        "textMode": "auto"
      }
    },
    {
      "id": 4,
      "type": "stat",
      "title": "Redis Stream ì „ì²´ ì²˜ë¦¬ëŸ‰ (RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 16, "y": 1 },
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval])) ) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "reqps" }, "overrides": [] },
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "orientation": "horizontal",
        "colorMode": "value",
        "graphMode": "area",
        "textMode": "auto"
      }
    },
    {
      "id": 5,
      "type": "gauge",
      "title": "RDBMS ì˜¤ë¥˜ìœ¨ (ì„œë²„ ì˜¤ë¥˜, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 0, "y": 5 },
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    (\n      (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", status=~\"5..\"}[$__rate_interval])) )\n      or\n      (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) )\n      or vector(0)\n    )\n    /\n    clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "min": 0, "max": 5 }, "overrides": [] },
      "options": {
        "reduceOptions": { "values": false, "calcs": ["lastNotNull"] },
        "orientation": "auto",
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      }
    },
    {
      "id": 6,
      "type": "gauge",
      "title": "Kafka ì˜¤ë¥˜ìœ¨ (ì„œë²„ ì˜¤ë¥˜, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 8, "y": 5 },
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    (\n      (sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", status=~\"5..\"}[$__rate_interval])) )\n      or\n      (sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) )\n      or vector(0)\n    )\n    /\n    clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "min": 0, "max": 5 }, "overrides": [] },
      "options": {
        "reduceOptions": { "values": false, "calcs": ["lastNotNull"] },
        "orientation": "auto",
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      }
    },
    {
      "id": 7,
      "type": "gauge",
      "title": "Redis Stream ì˜¤ë¥˜ìœ¨ (ì„œë²„ ì˜¤ë¥˜, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 4, "w": 8, "x": 16, "y": 5 },
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    (\n      (sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", status=~\"5..\"}[$__rate_interval])) )\n      or\n      (sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) )\n      or vector(0)\n    )\n    /\n    clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval])) ) or vector(0), 0.0001)\n  )\n) or vector(0)",
          "editorMode": "code",
          "range": true,
          "instant": false
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "min": 0, "max": 5 }, "overrides": [] },
      "options": {
        "reduceOptions": { "values": false, "calcs": ["lastNotNull"] },
        "orientation": "auto",
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      }
    },

    {
      "id": 8,
      "type": "row",
      "title": "âœï¸ ì“°ê¸° ì„±ëŠ¥ â€” RDBMS vs Kafka vs Redis Stream (RPS / P95Â·P99)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 9 }
    },

    {
      "id": 9,
      "type": "timeseries",
      "title": "RDBMS ì“°ê¸° ì²˜ë¦¬ëŸ‰ (Write RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 10 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "RDBMS Write RPS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 10,
      "type": "timeseries",
      "title": "Kafka ì“°ê¸° ì²˜ë¦¬ëŸ‰ (Write RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 10 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "Kafka Write RPS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 11,
      "type": "timeseries",
      "title": "Redis Stream ì“°ê¸° ì²˜ë¦¬ëŸ‰ (Write RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 10 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "RedisStream Write RPS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 12,
      "type": "timeseries",
      "title": "RDBMS ì“°ê¸° ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 18 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 13,
      "type": "timeseries",
      "title": "Kafka ì“°ê¸° ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 18 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 14,
      "type": "timeseries",
      "title": "Redis Stream ì“°ê¸° ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 18 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 15,
      "type": "row",
      "title": "ðŸ” ì½ê¸° ì„±ëŠ¥ â€” RDBMS vs Kafka vs Redis Stream (RPS / P95Â·P99)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 }
    },

    {
      "id": 16,
      "type": "timeseries",
      "title": "RDBMS ì½ê¸° ì²˜ë¦¬ëŸ‰ (Read RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 27 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "RDBMS Read RPS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      }
    },
    {
      "id": 17,
      "type": "timeseries",
      "title": "Kafka ì½ê¸° ì²˜ë¦¬ëŸ‰ (Read RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 27 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "Kafka Read RPS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      }
    },
    {
      "id": 18,
      "type": "timeseries",
      "title": "Redis Stream ì½ê¸° ì²˜ë¦¬ëŸ‰ (Read RPS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 27 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])) ) or vector(0)",
          "legendFormat": "RedisStream Read RPS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": { "drawStyle": "bars", "fillOpacity": 60, "showPoints": "never", "spanNulls": true }
        },
        "overrides": []
      }
    },

    {
      "id": 19,
      "type": "timeseries",
      "title": "RDBMS ì½ê¸° ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 35 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      }
    },
    {
      "id": 20,
      "type": "timeseries",
      "title": "Kafka ì½ê¸° ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 35 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      }
    },
    {
      "id": 21,
      "type": "timeseries",
      "title": "Redis Stream ì½ê¸° ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 35 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      }
    },

    {
      "id": 22,
      "type": "row",
      "title": "ðŸ§Š ì‹ ì„ ë„ â€” RDBMS vs Kafka vs Redis Stream (Freshness P95Â·P99)",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 43 }
    },

    {
      "id": 23,
      "type": "timeseries",
      "title": "RDBMS ì‹ ì„ ë„ ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 44 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_left\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      }
    },
    {
      "id": 24,
      "type": "timeseries",
      "title": "Kafka ì‹ ì„ ë„ ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 44 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_middle\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      }
    },
    {
      "id": 25,
      "type": "timeseries",
      "title": "Redis Stream ì‹ ì„ ë„ ì§€ì—° (P95 / P99, s)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 44 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(histogram_quantile(0.95, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P95",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(histogram_quantile(0.99, sum by (le) (rate(location_event_freshness_seconds_bucket{application=\"$application_right\"}[$__rate_interval])))) or vector(0)",
          "legendFormat": "P99",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "s" },
        "overrides": [
          { "matcher": { "id": "byName", "options": "P95" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#5794F2" } }] },
          { "matcher": { "id": "byName", "options": "P99" }, "properties": [{ "id": "color", "value": { "mode": "fixed", "fixedColor": "#B877D9" } }] }
        ]
      }
    },

    {
      "id": 26,
      "type": "row",
      "title": "ðŸ“ˆ ìƒëŒ€ ë¹„êµ(ë¶„ì„ìš©) â€” RDBMS ëŒ€ë¹„ Kafka/Redis Stream ë³€í™”",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 52 }
    },

    {
      "id": 27,
      "type": "timeseries",
      "title": "ì“°ê¸° P95 ë³€í™”ìœ¨ (Kafka/RDBMS, RedisStream/RDBMS, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 53 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    (\n      ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])))) or vector(0))\n      /\n      clamp_min(((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)), 0.000001)\n    ) - 1\n  )\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$write_uri_regex_middle\"}[$__rate_interval])))) or vector(0)) > bool 0)\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)) > bool 0)\n) or vector(0)",
          "legendFormat": "Kafka / RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(\n  100 * (\n    (\n      ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])))) or vector(0))\n      /\n      clamp_min(((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)), 0.000001)\n    ) - 1\n  )\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$write_uri_regex_right\"}[$__rate_interval])))) or vector(0)) > bool 0)\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$write_uri_regex_left\"}[$__rate_interval])))) or vector(0)) > bool 0)\n) or vector(0)",
          "legendFormat": "RedisStream / RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 28,
      "type": "timeseries",
      "title": "ì½ê¸° P95 ë³€í™”ìœ¨ (Kafka/RDBMS, RedisStream/RDBMS, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 53 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    (\n      ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])))) or vector(0))\n      /\n      clamp_min(((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)), 0.000001)\n    ) - 1\n  )\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_middle\", uri=~\"$read_uri_regex_middle\"}[$__rate_interval])))) or vector(0)) > bool 0)\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)) > bool 0)\n) or vector(0)",
          "legendFormat": "Kafka / RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(\n  100 * (\n    (\n      ((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])))) or vector(0))\n      /\n      clamp_min(((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)), 0.000001)\n    ) - 1\n  )\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_right\", uri=~\"$read_uri_regex_right\"}[$__rate_interval])))) or vector(0)) > bool 0)\n  * (((histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{application=\"$application_left\", uri=~\"$read_uri_regex_left\"}[$__rate_interval])))) or vector(0)) > bool 0)\n) or vector(0)",
          "legendFormat": "RedisStream / RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 29,
      "type": "timeseries",
      "title": "ì˜¤ë¥˜ìœ¨ ì°¨ì´ (%p) (Kafka-RDBMS, RedisStream-RDBMS)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 61 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  (\n    100 * (\n      (\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", status=~\"5..\"}[$__rate_interval])) )\n        or\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) )\n        or vector(0)\n      )\n      /\n      clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval])) ) or vector(0), 0.0001)\n    )\n  )\n  -\n  (\n    100 * (\n      (\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", status=~\"5..\"}[$__rate_interval])) )\n        or\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) )\n        or vector(0)\n      )\n      /\n      clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0), 0.0001)\n    )\n  )\n) or vector(0)",
          "legendFormat": "Kafka - RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(\n  (\n    100 * (\n      (\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", status=~\"5..\"}[$__rate_interval])) )\n        or\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) )\n        or vector(0)\n      )\n      /\n      clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval])) ) or vector(0), 0.0001)\n    )\n  )\n  -\n  (\n    100 * (\n      (\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", status=~\"5..\"}[$__rate_interval])) )\n        or\n        (sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\", outcome=\"SERVER_ERROR\"}[$__rate_interval])) )\n        or vector(0)\n      )\n      /\n      clamp_min((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval])) ) or vector(0), 0.0001)\n    )\n  )\n) or vector(0)",
          "legendFormat": "RedisStream - RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    },

    {
      "id": 30,
      "type": "timeseries",
      "title": "ì „ì²´ ì²˜ë¦¬ëŸ‰ ë³€í™”ìœ¨ (Kafka/RDBMS - 1, RedisStream/RDBMS - 1, %)",
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 61 },
      "maxDataPoints": 720,
      "targets": [
        {
          "refId": "A",
          "expr": "(\n  100 * (\n    (\n      ((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval]))) or vector(0))\n      /\n      clamp_min(((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval]))) or vector(0)), 0.000001)\n    ) - 1\n  )\n  * (((sum(rate(http_server_requests_seconds_count{application=\"$application_middle\", uri=~\"$total_uri_regex_middle\"}[$__rate_interval]))) or vector(0)) > bool 0)\n  * (((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval]))) or vector(0)) > bool 0)\n) or vector(0)",
          "legendFormat": "Kafka / RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        },
        {
          "refId": "B",
          "expr": "(\n  100 * (\n    (\n      ((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval]))) or vector(0))\n      /\n      clamp_min(((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval]))) or vector(0)), 0.000001)\n    ) - 1\n  )\n  * (((sum(rate(http_server_requests_seconds_count{application=\"$application_right\", uri=~\"$total_uri_regex_right\"}[$__rate_interval]))) or vector(0)) > bool 0)\n  * (((sum(rate(http_server_requests_seconds_count{application=\"$application_left\", uri=~\"$total_uri_regex_left\"}[$__rate_interval]))) or vector(0)) > bool 0)\n) or vector(0)",
          "legendFormat": "RedisStream / RDBMS",
          "editorMode": "code",
          "range": true,
          "instant": false,
          "interval": "30s",
          "intervalFactor": 1
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent", "custom": { "drawStyle": "line", "showPoints": "never", "spanNulls": true } }, "overrides": [] },
      "options": { "legend": { "showLegend": true, "placement": "bottom", "displayMode": "list" }, "tooltip": { "mode": "single" } }
    }
  ]
}